# HTTP概述

## MIME 媒体类型

因特网上由数千种不同的数据类型。

MIME类型是一种文本标记，表示一种主要的对象烈性和一个特定的子类型，中间由一条斜杠来分割。

##URI 
每个Web服务器资源都有一个名字。服务器资源名被称为**统一资源标识符(Uniform Resource Identifier, URI)**。

URL有两种形式，分别成为URL和URN。

### URL 统一资源定位符

URL是资源标识符最常见的形式。

大部分URL都遵循一种标准格式，这种格式包含三个部分。

* URL的第一部分被称为方案（scheme），说明了访问资源搜使用的协议类型。这部分通常就是HTTP协议(http://).
* 第二部分给出了服务器的因特网地址。
* 其余部分制订了Web服务器上的某个资源。

现在，几乎所有的URI都是URL。

### URN 统一资源名

URN是作为特定内容的唯一名称使用的，与目前的资源所在地无关。使用这些与位置无关的URN，就可以将资源四处搬移。通过URN还可以用同一个名字通过多种网络访问协议来访问资源。

## 事务

一个HTTP食物由一条(从客户端发往服务器的)请求命令和一个(从服务器发回客户端的)响应结果组成。这种通信是通过名为HTTP报文(HTTP message)的格式化数据块进行的。

### 1.方法

HTTP支持几种不同的请求命令，这些命令被称为HTTP方法(HTTP method)。方法会告诉浏览器要执行什么操作。

常见的HTTP方法有

* GET 从服务器向客户端发送命名资源
* PUT 将来自客户端的数据存储到一个明明的服务器资源中去
* DELETE 从服务器中删除命名资源
* POST 将客户端数据放到一个服务器网关应用程序
* HEAD 进发送命名资源响应中的HTTP首部

### 2.状态码

每条HTTP相应保温返回时都会携带一个状态码。状态码是一个三位数字的代码，告知客户端请求是否成功，或者是否需要采取其它动作。伴随着每个数字状态码，HTTP还会发送一条解释性的"原因短语"文本。

### 3.Web页面可以包含多个对象


## 报文

报文由请求和响应两种报文。

HTTP报文是由一行一行的简单字符串组成的。HTTP报文都是纯文本，不是二进制代码，所以人们可以很方便地对其进行读写。


HTTP报文包括以下三个部分。

* 起始行<br>
 报文的第一行就是起始行，在请求报文中用来说明要做些什么，在响应报文中说明出现了什么情况。
* 部首字段<br>
 起始行后面有零个或多个不受字段。每个首部字段都包含一个名字和一个值，为了便于解析，两者之间用冒号(:)来分割。首部以一个空行结束。添加一个不受字段和添加新行一样简单。
* 主体<br>
 空行之后就是可选的报文主体了，其中包含了所有类型的数据。请求主题张包括了要发送给Web服务器的数据；响应主体中装载了要返回给客户端的数据。起始行和部首都是文本形式且都是结构化的，而主体则不同，主体中可以包含任意的二进制数据（比如图片，视频，音轨，软件程序）。主体也可以包含文本。


## 链接

### TCP/IP	

TCP提供了：

* 无差错的数据传输
* 按序传输(数据总是会按照发送的顺序到达)
* 为分段的数据流(可以在任意时刻以任意尺寸将数据发送出去)

只要建立了TCP链接，客户端和服务器之间的报文交换就不会丢失/不会被破环，也不会在接收时出现错序。

用网络术语来说，HTTP协议位于TCP的上层。HTTP使用TCP来传输其报文数据。与之类似，TCP则位于IP的上层。


### 链接，IP地址及端口号

在HTTP客户端向服务器发送报文之前，需要用网际协议(IP)地址和端口号在客户端和服务器之间建立一条TCP/IP连接。



在TCP中你要知道服务器的IP地址，以及服务器上运行的特定软件相关的TCP端口号。


步骤如下

1. 浏览器从URL总解析出服务器的主机名；
2. 浏览器将服务器的主机名转换成服务器的IP地址
3. 浏览器将端口号(如果有的话)从URL中解析出来；
4. 浏览器建立一条与Web服务器的TCP链接；
5. 浏览器向服务器发送一条HTTP请求报文；
6. 服务器向浏览器回送一条HTTP响应报文；
7. 关闭连接，浏览器显示文档。


### Web的结构组件

在因特网上，要与很多Web应用程序进行交互。在本节中，我们将列出其他一些比较重要的应用程序。

* **代理** 位于客户端和服务器之间的HTTP中间实体
* **缓存** HTTP的仓库，使常用页面的副本可以保存在离客户端更近的地方
* **网关** 连接其他应用程序的特殊Web服务器。
* **隧道** 对HTTP通信报文进行盲转发的特殊代理
* **Agent代理** 发起自动HTTP请求的半智能Web客户端。

#### 代理

HTTP代理服务器时Web安全，用用集成以及性能优化的重要组成模块。

代理位于客户端和服务器之间，接收所有客户端的HTTP请求，并将这些请求转发给服务器（可能会对请求进行修改之后转发）。

出于安全考虑，通常会将代理作为转发所有Web流量的可信任中间节点使用。代理还可以对请求和响应进行过滤。


#### 缓存

Web缓存或代理缓存是一种特殊的HTTP代理服务器，可以蒋经过代理传送的常用文档复制保存起来。下一个请求同意文档的客户端就可以享受缓存的私有副本所提供的服务了。

客户端从附近的缓存下载文档会比远程服务器Web服务器下载快得多。HTTP定义了很多功能，使用缓存更加高效，并规范了文档的新鲜度和缓存内容的隐私性。


#### 网关

网关时一种特殊的服务器，作为其他服务器的中间实体使用。通常用于将HTTP流量转换成其他的协议。网管接收请求时就好像自己是资源的远端服务器一样。客服端可能不知道自己正在与一个网关进行通信。









