# 第十八章 Web主机托管

## 18.2 虚拟主机托管

冲成本效益、空间以及管理方面考虑，提供虚拟主机托管的公司希望能在同一个服务器上托管数十、上百、甚至上千的网站——但咋和不一定意味着上千网站是一台PC机日工服务的。托管这可以创建成排同样的服务器，称为服务器集群，吧负载分摊在群里的服务器上。

### 18.2.1 虚拟主机缺乏主机信息

HTTP/1.0规范中没有为共享的Web服务器提供任何方法识别要访问的是哪一个托管的网站。HTTP/1.0请求在报文中只发送URL的路径部分。请求中只会提到GET /index.html，没有提到主机名。如果服务器虚拟托管了多个站点，就没有足够的信息能指出要访问的是哪个虚拟网站。

### 18.2.2 设法让虚拟主机托管正常工作

HTTP/1.1的确要求所有HTTP请求报文发送完整的URL而不只是路径部分来简单地解决。而HTTP/1.1的确要求服务器能够处理HTTP报文请求行上的完整URL。

下面还有4种技术来解决这个问题

* 通过URL路径进行虚拟主机托管<br>在URL中添加专门的路径部分，以便服务器判断是哪个网站。
* 通过端口号进行主机托管<br>为每个长点分配不同的端口号，这样请求就由Web服务器的单独实例来处理。
* 通过IP地址进行主机托管<br>为不同的虚拟站点分配专门的IP地址，把这些地址绑定到一台单独的机器上。这样，Web服务器就可以通过IP地址来识别网站名了。
* 通过Host首部进行主机托管<br>很多托管着向HTTP的设计者施压，要求解决这个问题。HTTP/1.0的增强版和HTTP/1.1的正式版定义了Host请求首部来携带网站名称。

